<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Connectivity | Swarm Bee Client</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Connectivity | Swarm Bee Client"><meta data-react-helmet="true" name="description" content="To connect to the outside world, your Bee node needs to be able to both send and receive messages from the outside world. Normally, your router will not allow other IP&#x27;s on the internet to connect, unless you have connected to them first. In Swarm, we welcome newcomers, as long as they play by the rules. If a node misbehaves, we will simply add it to a list of blocked nodes and refuse future connections from them."><meta data-react-helmet="true" property="og:description" content="To connect to the outside world, your Bee node needs to be able to both send and receive messages from the outside world. Normally, your router will not allow other IP&#x27;s on the internet to connect, unless you have connected to them first. In Swarm, we welcome newcomers, as long as they play by the rules. If a node misbehaves, we will simply add it to a list of blocked nodes and refuse future connections from them."><meta data-react-helmet="true" property="og:url" content="https://bee.ethswarm.org/docs/installation/connectivity"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://bee.ethswarm.org/docs/installation/connectivity"><link rel="stylesheet" href="/styles.148959f2.css">
<link rel="preload" href="/styles.9931beaa.js" as="script">
<link rel="preload" href="/runtime~main.1dd0f8a0.js" as="script">
<link rel="preload" href="/main.024711b3.js" as="script">
<link rel="preload" href="/1.90e0690e.js" as="script">
<link rel="preload" href="/2.d2f2440d.js" as="script">
<link rel="preload" href="/3.0693e4b7.js" as="script">
<link rel="preload" href="/1be78505.a0d740dc.js" as="script">
<link rel="preload" href="/52.02bf7ec8.js" as="script">
<link rel="preload" href="/20ac7829.a958037f.js" as="script">
<link rel="preload" href="/17896441.cab17086.js" as="script">
<link rel="preload" href="/f004836b.b030c2d8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/swarm-logo.svg" alt="Swarm Logo"><strong class="navbar__title">Swarm Bee Documentation</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Get Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/installation/quick-start">Installation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/start-your-node">Start Your Node</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/api-reference/api-reference">API Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ethersphere/bee" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/swarm-logo.svg" alt="Swarm Logo"><strong class="navbar__title">Swarm Bee Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Get Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/installation/quick-start">Installation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/getting-started/start-your-node">Start Your Node</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/api-reference/api-reference">API Reference</a></li><li class="menu__list-item"><a href="https://github.com/ethersphere/bee" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Welcome!</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation/quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation/configuration">Configuring Your Bee Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation/build-from-source">Build from Source</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation/docker">Bee Using Docker</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/installation/connectivity">Connectivity</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/start-your-node">Start Your Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/working-with-your-node">Working With Your Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/upload-and-download">Upload and Download Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/upload-a-directory">Upload a Directory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/host-your-website-using-ens">Host Your Website on Swarm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/store-with-encryption">Store with Encryption</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced Usage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/pss">PSS Messaging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/tags">Track Upload Status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/persistence">Persistence</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/swap">SWAP Bandwidth Accounting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/starting-a-test-network">Starting a Test Network</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api-reference/api-reference">API and Debug API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Bee Developers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bee-developers/useful-dev-info">Useful Developer Info</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Join Us</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/community">Community</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Connectivity</h1></header><div class="markdown"><p>To connect to the outside world, your Bee node needs to be able to both send and receive messages from the outside world. Normally, your router will not allow other IP&#x27;s on the internet to connect, unless you have connected to them first. In Swarm, we welcome newcomers, as long as they play by the rules. If a node misbehaves, we will simply add it to a list of blocked nodes and refuse future connections from them.</p><p>In Swarm, every Bee counts! To make sure all Bees can join the swarm, below you will find a detailed guide to navigating your way through your network and making out into the wild so you can buzz with the crowd. If you still have problems, join us in <a href="http://beehive.ethswarm.org/" target="_blank" rel="noopener noreferrer">The Beehive</a> and we&#x27;ll help you find the way! 🐝 🐝 🐝 🐝 🐝</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="networking-basics"></a>Networking Basics<a aria-hidden="true" tabindex="-1" class="hash-link" href="#networking-basics" title="Direct link to heading">#</a></h3><p>In a network, each computer is assigned an IP. Each IP is then subdivided into thousands of <em>sockets</em> or <em>ports</em>, each of which has an incoming and outgoing component.</p><p>In a completely trusted network of computers, connections to or from any of these ports are allowed. However, to protect ourselves from nefarious actors when we join the wider internet, it is sometimes important to filter this traffic so that some of these ports are off limits to the public.</p><p>In order to allow other Bee nodes we have previously not met to be able to send messages to our p2p port, usually <code>7070</code>, we must ensure that our network is set up to receive incoming connections.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>There are also some ports which you should never expose to the outside internet. Make sure that your <code>api-addr</code>, usually port <code>8080</code> is only exposed in <code>Gateway Mode</code> and your <code>--debug-api-addr</code>, usually <code>6060</code> is never exposed to the internet. It is good practice to employ one or more firewalls which block traffic on every port except for those for whom you are expecting it.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="your-ip"></a>Your IP<a aria-hidden="true" tabindex="-1" class="hash-link" href="#your-ip" title="Direct link to heading">#</a></h2><p>When you connect to the internet, you are assigned a unique number called an IP Address. IP stands for <strong>Internet Protocol</strong>. The most prevalent IP version used is <em>still</em> the archaic <a href="https://en.wikipedia.org/wiki/IPv4" target="_blank" rel="noopener noreferrer">IPv4</a> which was invented way back in 1981. IPv6 is available but not well used. Due to the mitigation of the deficiencies within this standard, we may encounter some complications.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="datacenters-and-computers-connected-directly-to-the-internet"></a>Datacenters and Computers Connected Directly to the Internet<a aria-hidden="true" tabindex="-1" class="hash-link" href="#datacenters-and-computers-connected-directly-to-the-internet" title="Direct link to heading">#</a></h3><p>If you are renting space in a datacenter, the chances are that your computer will be connected directly to the real internet. This means that the IP of your networking interface will be directly set to be the same as your public IP.</p><p>You can investigate this by running:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ifconfig</span></div></div></div></div></div><p>or </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ip address</span></div></div></div></div></div><p>Your output should contain something like:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        inet 178.128.196.191  netmask 255.255.240.0  broadcast 178.128.207.255</span></div></div></div></div></div><p>Here we can see our computer&#x27;s <strong>public IP</strong> <code>178.128.196.191</code>. This is the address that is used by other computers we connect to over the internet. We can very this using a third party service such as <em>icanhazip</em>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl icanhazip.com</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">178.128.196.191</span></div></div></div></div></div><p>If these numbers correspond, congratulations! You may skip the next section!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="home-commercial-and-business-networks-and-other-networks-behind-nat"></a>Home, Commercial and Business Networks and Other Networks Behind NAT<a aria-hidden="true" tabindex="-1" class="hash-link" href="#home-commercial-and-business-networks-and-other-networks-behind-nat" title="Direct link to heading">#</a></h3><p>To address the <a href="https://en.wikipedia.org/wiki/IPv4_address_exhaustion" target="_blank" rel="noopener noreferrer">scarcity of IP numbers</a>, Network Address Translation (NAT) was implemented. This approach creates a smaller, private network which many devices connect to in order to share a public IP. Traffic destined for the internet at large is then mediated by another specialised computer. In the cases of the a home network, this computer is the familiar home router, normally also used to provide a wifi network.</p><p>If we run the above commands to find the computer&#x27;s IP in this scenario, we will see a different output.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ip address</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    inet 192.168.0.10 netmask 0xffffff00 broadcast 192.168.0.255</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div></div></div></div></div><p>Here we can see that, instead of the public IP, we can see that our computers IP is <code>192.168.0.10</code>. This is part of the IP address space that the Internet Engineering Task Force has designated for <a href="https://en.wikipedia.org/wiki/Private_network" target="_blank" rel="noopener noreferrer">private networks</a>. </p><p>As this IP won&#x27;t work on the global internet, our router remembers that our computer has been assigned this IP. It then uses Network Address Translation to modify all requests from our computer to another computer somewhere in the internet. As the requests pass through the router it changes our local IP to the public IP of the router, and vice versa when the responses are sent back, from the public IP to the local one.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="navigating-through-the-nat"></a>Navigating Through the NAT<a aria-hidden="true" tabindex="-1" class="hash-link" href="#navigating-through-the-nat" title="Direct link to heading">#</a></h4><p>The presence of Network Address Translations presents two problems for p2p networking. </p><p>The first is that it can be difficult for programs running on our computer to know our real public IP as it is not explicitly known by our computer&#x27;s networking interface, which is configured with a private network IP. This is a relatively easy problem to solve as we can simply discover our public IP and then specify it in Bee&#x27;s configuration, or indeed determine it using other means.</p><p>The second issue is that our router has only 65535 ports to expose to the public network, however, <em>each device on your private network</em> is capable of exposing 65535 <em>each</em>. To the global internet, it appears that there is only one set of ports to connect to, whereas, in actual fact, there is a full set of ports for each of the devices which are connected to the private network. To solve this second problem, routers commonly employ an approach known as <em>port forwarding</em>.</p><p>Bee&#x27;s solution to these problems come in two flavours, automatic and manual.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="automatic-universal-plug-and-play-upnp"></a>Automatic: Universal Plug and Play (UPNP)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#automatic-universal-plug-and-play-upnp" title="Direct link to heading">#</a></h5><p>UPNP is a protocol designed to simplify the administration of NAT and port forwarding by the end user by providing an API which software running within the network can use to ask the router for the external IP and to request for ports to be forwarded to the internal IP of the computer running the software.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-danger codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">UPNP can be considered a security risk as it exposes your (real) public IP to any processes running on your computer, and also allows them to open arbitrary ports which may be used to transfer malicious traffic, for example a [RAT](https://en.wikipedia.org/wiki/Remote_desktop_software#RAT). We recommend you disable UPNP on your router and use manual port forwarding as described below.</span></div></div></div></div></div><p>Bee will use UPNP to determine your public IP, which is required for various internal processes.</p><p>In addition to this, a request will be sent to your router to ask it to forward a random one of it&#x27;s ports, which are exposed directly to the internet, to the Bee p2p port (usually <code>7070</code>) which your computer is exposing only to the private network. Doing this creates a tunnel through which other Bee&#x27;s may connect to your computer safely.</p><p>If you start your Bee node in a private network with UPNP available, the output of the addresses endpoint of your debug API will look something like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/127.0.0.1/tcp/7072/p2p/16Uiu2HAm5zcoBFWmqjDTwGy9RXepBFF8idy6Pr312obMwwxdJSUP&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/192.168.0.10/tcp/7072/p2p/16Uiu2HAm5zcoBFWmqjDTwGy9RXepBFF8idy6Pr312obMwwxdJSUP&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip6/::1/tcp/7072/p2p/16Uiu2HAm5zcoBFWmqjDTwGy9RXepBFF8idy6Pr312obMwwxdJSUP&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/86.98.94.9/tcp/20529/p2p/16Uiu2HAm5zcoBFWmqjDTwGy9RXepBFF8idy6Pr312obMwwxdJSUP&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div></div></div><p>Note that the port in the external <a href="https://docs.libp2p.io/concepts/addressing/" target="_blank" rel="noopener noreferrer">multiaddress</a> is the router&#x27;s randomly selected <code>20529</code> which is forwarded by the router to <code>192.168.0.10:7070</code>.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="manual-configure-your-router-and-bee"></a>Manual: Configure Your Router and Bee<a aria-hidden="true" tabindex="-1" class="hash-link" href="#manual-configure-your-router-and-bee" title="Direct link to heading">#</a></h5><p>Inspecting the underlay addresses in the output of the addresses endpoint our debug API, we can see addresses only for <em>localhost</em> <code>127.0.0.1</code> and our <em>private network IP</em> <code>192.168.0.10</code>. Bee must be having trouble navigating our NAT.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;/ip4/127.0.0.1/tcp/7070/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;/ip4/192.168.0.10/tcp/7070/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;/ip6/::1/tcp/7070/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></div></div></div></div><p>To help fix the first problem, let&#x27;s determine our public IP.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl icanhazip.com</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">86.98.94.9</span></div></div></div></div></div><p>Now we can simply supply this IP in our Bee configuration on startup.</p><p>Solving our second problem is a little more difficult as we will need to interact with our router&#x27;s firmware, which is a little cranky.</p><p>Each router is different, but the concept is usually the same. Log in to your router by navigating your browser to your router&#x27;s configuration user interface, usually at <a href="http://192.168.0.1" target="_blank" rel="noopener noreferrer">http://192.168.0.1</a>. You will need to log in with a password. Sadly, passwords are often left to be the defaults, which can be found readily on the internet.</p><p>Once logged in, find the interface to set up port forwarding. The <a href="https://portforward.com/router.htm" target="_blank" rel="noopener noreferrer">Port Forward</a> website provides some good information, or you may refer to your router manual or provider.</p><p>Here, we will then set up a rule that forwards port <code>7070</code> of our internal IP <code>192.168.0.10</code> to the same port <code>7070</code> of our external IP.</p><p>Now, when requests arrive at our external address <code>86.98.94.9:7070</code> they are modified by our router and forwarded to our internal IP and port <code>192.168.0.10:7070</code>.</p><p>Sometimes this can be a little tricky, so let&#x27;s verify we are able to make a TCP connection using <a href="https://nmap.org/ncat/" target="_blank" rel="noopener noreferrer">netcat</a>.</p><p>First, with Bee <strong>not</strong> running, let&#x27;s set up a simple TCP listener using Netcat on the same machine we would like to run Bee on.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nc -l 0.0.0.0 7070</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nc -zv 86.98.94.9 7070</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Connection to 86.98.94.9 port 7072 [tcp/*] succeeded!</span></div></div></div></div></div><p>Success! ✨</p><p>If this didn&#x27;t work for you, check out our <a href="">Debugging Connectivity</a> guide below.</p><p>If it did, let&#x27;s start our Bee node with the <code>--nat-addr</code> configured.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">bee start --nat-addr 86.98.94.9:7070</span></div></div></div></div></div><p>Checking our addresses endpoint again, we can now see that Bee has been able to successfully assign a public address! Congratulations, your Bee is now connected to the outside world!</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;/ip4/127.0.0.1/tcp/7070/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;/ip4/192.168.0.10/tcp/7070/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;/ip6/::1/tcp/7070/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;/ip4/86.98.94.9/tcp/7070/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></div></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you are regularly connecting and disconnecting to a network, you may also want to use your router&#x27;s firmware to configure the router to reserve and only assign the same local network IP from it&#x27;s DHCP pool to your computer&#x27;s MAC address. This will ensure that your Bee seamlessly connects when you rejoin the network!</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debugging-connectivity"></a>Debugging Connectivity<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging-connectivity" title="Direct link to heading">#</a></h3><p>The above guide navigates your NAT, but there are still a few hurdles to overcome. To make sure there is a clear path from your computer to the outside world, let&#x27;s follow our Bee&#x27;s journey from the inside out.</p><p>Let&#x27;s set up a Netcat listener on all interfaces on the computer we&#x27;d like to run Bee on as we have above.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nc -l 0.0.0.0 7070</span></div></div></div></div></div><p>Now, let&#x27;s verify we&#x27;re above to test this by checking the connection on our local machine.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nc -zv 127.0.0.1 7070</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nc -zv 127.0.0.1 7070</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Connection to 127.0.0.1 port 7070 [tcp/*] succeeded!</span></div></div></div></div></div><p>This should be a no brainer, the connection between localhost in not normally mediated. </p><p>If there is a problem here, the problem is with some other software running on your operating system or your operating system itself. Try a different port, such as <code>7071</code> and turning off any unneccesary software. If this doesn&#x27;t work, you may need to try a different operating system environment. Please get in touch and we&#x27;ll try to help!</p><p>If we were successful, let&#x27;s move on to the next stage.</p><p>Let&#x27;s find out what our IP looks like to the internet.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl icanhazip.com</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">86.98.94.9</span></div></div></div></div></div><p>Now try to connect to your port using the global IP.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nc -zv 86.98.94.9 7070</span></div></div></div></div></div><p>If this is successful, our Bee node&#x27;s path is clear!</p><p>If not, we can try a few things to make sure there are no barriers stopping us from getting through.</p><ol><li>Check your computers firewall.</li></ol><p>Sometimes your computer is configured to prevent connections. If you are on a private network mediated by NAT, you can check if this is the problem by trying to connect from another device on your network using the local IP <code>nc -zv 192.168.0.10 7070</code>.</p><p>Ubuntu uses <a href="https://help.ubuntu.com/community/UFW" target="_blank" rel="noopener noreferrer">UFW</a>, MacOS can be configured using the <em>Firewall</em> tab in the <em>Security &amp; Privacy</em> section of <em>System Preferences</em>. Windows uses <a href="https://support.microsoft.com/en-us/help/4028544/windows-10-turn-microsoft-defender-firewall-on-or-off" target="_blank" rel="noopener noreferrer">Defender Firewall</a>.</p><p>For each of these firewalls, set a special rule to allow UDP and TCP traffic to pass through on port <code>7070</code>. You may want to limit this traffic to the Bee application only.</p><ol start="2"><li>Check your ingress firewall.</li></ol><p>For a datacenter hired server, this configuration will often take place in somewhere in the web user interface. Refer to your server hosting provider&#x27;s documentation to work out how to open ports to the open internet. Ensure that both TCP and UDP traffic are allowed.</p><p>Similarly, if you are connecting from within a private network, you may find that the port is blocked by the router. Each router is different, so consult your router&#x27;s firware documentation to make sure there are no firewalls in place blocking traffic on your Bee&#x27;s designated p2p port.</p><p>You may check this using Netcat by trying to connect using your computer&#x27;s public IP, as above <code>nc -zv 86.98.94.9 7070</code>.</p><ol start="3"><li>Docker</li></ol><p>Docker adds another level of complexity. </p><p>To debug docker connectivity issues, we may use netcat as above to check port connections are working as expected. Double check that you are exposing the right ports to your local network, either by using the command line flags or in your docker-compose.yaml. You should be able to successfully check the connection locally using eg. <code>nc -zv localhost 7070</code> then follow instructions above to make sure your local network has the correct ports exposed to the internet.</p><ol start="3"><li>Something else entirely?</li></ol><p>Networking is a complex topic, but it keeps us all together. If you still can&#x27;t connect to your Bee, get in touch via <a href="http://beehive.ethswarm.org/" target="_blank" rel="noopener noreferrer">The Beehive</a> and we&#x27;ll do our best to get you connected. In the swarm, no Bee is left behind. </p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ethersphere/docs.github.io/docs/installation/connectivity.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/installation/docker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Bee Using Docker</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/getting-started/start-your-node"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Start Your Node »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#networking-basics" class="table-of-contents__link">Networking Basics</a></li><li><a href="#your-ip" class="table-of-contents__link">Your IP</a><ul><li><a href="#datacenters-and-computers-connected-directly-to-the-internet" class="table-of-contents__link">Datacenters and Computers Connected Directly to the Internet</a></li><li><a href="#home-commercial-and-business-networks-and-other-networks-behind-nat" class="table-of-contents__link">Home, Commercial and Business Networks and Other Networks Behind NAT</a></li><li><a href="#debugging-connectivity" class="table-of-contents__link">Debugging Connectivity</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Swarm</h4><ul class="footer__items"><li class="footer__item"><a href="https://ethswarm.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Swarm</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://beehive.ethswarm.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mattermost</a></li><li class="footer__item"><a href="https://www.reddit.com/r/ethswarm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://twitter.com/ethswarm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/ethereum-swarm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/ethersphere/bee" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyleft © 2020.</div></div></div></footer></div>
<script src="/styles.9931beaa.js"></script>
<script src="/runtime~main.1dd0f8a0.js"></script>
<script src="/main.024711b3.js"></script>
<script src="/1.90e0690e.js"></script>
<script src="/2.d2f2440d.js"></script>
<script src="/3.0693e4b7.js"></script>
<script src="/1be78505.a0d740dc.js"></script>
<script src="/52.02bf7ec8.js"></script>
<script src="/20ac7829.a958037f.js"></script>
<script src="/17896441.cab17086.js"></script>
<script src="/f004836b.b030c2d8.js"></script>
</body>
</html>