<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Store with Encryption | Swarm Bee Client</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Store with Encryption | Swarm Bee Client"><meta data-react-helmet="true" name="description" content="In Swarm, all data is public by default. To protect sensitive content, it must be encrypted so that only authorised users are able to decrypt and then view the plaintext content."><meta data-react-helmet="true" property="og:description" content="In Swarm, all data is public by default. To protect sensitive content, it must be encrypted so that only authorised users are able to decrypt and then view the plaintext content."><meta data-react-helmet="true" property="og:url" content="https://bee.ethswarm.org/docs/getting-started/store-with-encryption"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://bee.ethswarm.org/docs/getting-started/store-with-encryption"><link rel="stylesheet" href="/styles.148959f2.css">
<link rel="preload" href="/styles.9931beaa.js" as="script">
<link rel="preload" href="/runtime~main.aa5facdd.js" as="script">
<link rel="preload" href="/main.6df5b14b.js" as="script">
<link rel="preload" href="/1.ea0e15ed.js" as="script">
<link rel="preload" href="/2.4417e076.js" as="script">
<link rel="preload" href="/3.5fcbe965.js" as="script">
<link rel="preload" href="/1be78505.c43b3c86.js" as="script">
<link rel="preload" href="/51.f191b805.js" as="script">
<link rel="preload" href="/20ac7829.f738a4bc.js" as="script">
<link rel="preload" href="/17896441.d05c4289.js" as="script">
<link rel="preload" href="/e7998a08.b3a908ca.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/swarm-logo.svg" alt="Swarm Logo"><strong class="navbar__title">Swarm Bee Documentation</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Get Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/installation/quick-start">Installation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/start-your-node">Start Your Node</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/api-reference/api-reference">API Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ethersphere/bee" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/swarm-logo.svg" alt="Swarm Logo"><strong class="navbar__title">Swarm Bee Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Get Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/installation/quick-start">Installation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/getting-started/start-your-node">Start Your Node</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/api-reference/api-reference">API Reference</a></li><li class="menu__list-item"><a href="https://github.com/ethersphere/bee" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Welcome!</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/configuration">configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/build-from-source">Build from Source</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/docker">Bee Using Docker</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/start-your-node">Start Your Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/working-with-your-node">Working With Your Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/upload-and-download">Upload and Download Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/upload-a-directory">Upload a Directory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/host-your-website-using-ens">Host Your Website on Swarm</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/getting-started/store-with-encryption">Store with Encryption</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced Usage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/pss">PSS Messaging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/tags">Track Upload Status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/persistence">Persistence</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/swap">SWAP Bandwidth Accounting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/starting-a-test-network">Starting a Test Network</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api-reference/api-reference">API and Debug API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Bee Developers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bee-developers/useful-dev-info">Useful Developer Info</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Store with Encryption</h1></header><div class="markdown"><p>In Swarm, all data is public by default. To protect sensitive content, it must be encrypted so that only authorised users are able to decrypt and then view the plaintext content. </p><p>The Bee client provides a facility to encrypt files and directories while uploading which are only able to be read by users with access to the corresponding decryption key.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="encrypt-and-upload-a-file"></a>Encrypt and Upload a File<a aria-hidden="true" tabindex="-1" class="hash-link" href="#encrypt-and-upload-a-file" title="Direct link to heading">#</a></h1><p>To encrypt a file simply include the <code>Swarm-Encrypt: true</code> header with your HTTP request.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ curl -F file=@bee.jpg -H &quot;Swarm-Encrypt: true&quot; http://localhost:8080/files</span></div></div></div></div></div><p>When successful, the Bee client will return a 64 byte reference, instead of the usual 32 bytes.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token property">&quot;reference&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;f7b1a45b70ee91d3dbfd98a2a692387f24db7279a9c96c447409e9205cf265baef29bf6aa294264762e33f6a18318562c86383dd8bfea2cec14fae08a8039bf3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>Here we see that, when using the Bee node&#x27;s encryption function, the reference hash that is returned is 128 hex characters long. The first 64 characters of this are the familiar Swarm address - the reference that allows us to retrieve the data from the swarm - it is the same as the reference we would get uploading unencrypted files to using Bee it is safe to share.</p><p>The second second part of the reference is a 64 character decryption key which is required to decrypt the referenced content and view the original data in the clear, this is sensitive key material and must be kept private.</p><p>It is important that this data is not be sent in requests to a public gateway as this would mean that gateway would be able to decrypt your data. However, if you are running a node on your local machine, you may safely use the api bound to <code>localhost</code>. The key material is never exposed to the network so your data remains safe.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Encryption is disabled by default on all Swarm Gateways to keep your data safe. <a href="/docs/installation/quick-start">Install Bee on your computer</a> to use the encryption feature.</p></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="download-and-decrypt-a-file"></a>Download and Decrypt a File<a aria-hidden="true" tabindex="-1" class="hash-link" href="#download-and-decrypt-a-file" title="Direct link to heading">#</a></h1><p>To retrieve your file, simply supply the full 64 byte string to the files endpoint, and the Bee client will download and decrypt all the relevant chunks and restore them to their original format.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ curl -OJ http://localhost:8083/files/f7b1a45b70ee91d3dbfd98a2a692387f24db7279a9c96c447409e9205cf265baef29bf6aa294264762e33f6a18318562c86383dd8bfea2cec14fae08a8039bf3</span></div></div></div></div></div><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>Never use public gateways when requesting full encrypted references, the hash contains sensitive key information which should be kept private. Run <a href="/docs/installation/quick-start">your own node</a> to get the use Bee&#x27;s encryption features.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ethersphere/docs.github.io/docs/getting-started/store-with-encryption.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/getting-started/host-your-website-using-ens"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Host Your Website on Swarm</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/advanced/pss"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PSS Messaging Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Swarm</h4><ul class="footer__items"><li class="footer__item"><a href="https://ethswarm.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Swarm</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://beehive.ethswarm.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mattermost</a></li><li class="footer__item"><a href="https://www.reddit.com/r/ethswarm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://twitter.com/ethswarm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/ethereum-swarm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/ethersphere/bee" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyleft Â© 2020.</div></div></div></footer></div>
<script src="/styles.9931beaa.js"></script>
<script src="/runtime~main.aa5facdd.js"></script>
<script src="/main.6df5b14b.js"></script>
<script src="/1.ea0e15ed.js"></script>
<script src="/2.4417e076.js"></script>
<script src="/3.5fcbe965.js"></script>
<script src="/1be78505.c43b3c86.js"></script>
<script src="/51.f191b805.js"></script>
<script src="/20ac7829.f738a4bc.js"></script>
<script src="/17896441.d05c4289.js"></script>
<script src="/e7998a08.b3a908ca.js"></script>
</body>
</html>